<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>حاسبة السيرة الذاتية</title>
<style>
  :root{
    --bg:#0b1020; --panel:#0f172a; --card:#111827; --ink:#e5e7eb; --muted:#94a3b8;
    --ring:#334155; --brand:#22d3ee; --ok:#22c55e; --wa:#25D366; --danger:#ef4444;
  }
  *{box-sizing:border-box}
  body{
    margin:0;background:var(--bg);color:var(--ink);
    font-family:"Tajawal","Cairo","Segoe UI",Tahoma,sans-serif;
    unicode-bidi: plaintext;
  }
  .wrap{max-width:980px;margin:28px auto;padding:16px}
  .card{background:var(--card);border:1px solid #0e162c;border-radius:18px;padding:18px;box-shadow:0 12px 28px rgba(0,0,0,.45)}
  header{display:flex;gap:12px;align-items:center;justify-content:center}
  .logo img{width:82px;height:82px;border-radius:16px;object-fit:cover;background:#e5e7eb;box-shadow:0 6px 18px rgba(0,0,0,.35)}
  h1{margin:8px 0 2px;font-size:26px}
  .sub{color:var(--muted);text-align:center;font-size:12px}
  .note{margin-top:12px;background:#0b1328;border:1px dashed var(--ring);color:#fde68a;padding:12px;border-radius:14px;font-size:13px;line-height:1.8}
  label{display:flex;justify-content:space-between;align-items:center;font-weight:800;margin:10px 0 6px}
  .badge{font-size:11px;color:#cbd5e1}
  .input,select,textarea{
    width:100%;background:#0a1020;color:var(--ink);border:1px solid var(--ring);
    border-radius:14px;padding:12px 14px;outline:none
  }
  .input:focus,select:focus,textarea:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(34,211,238,.25)}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media (min-width:760px){ .grid-2{grid-template-columns:1fr 1fr} .grid-3{grid-template-columns:repeat(3,1fr)} }
  .meta{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
  .chip{background:#0a1020;border:1px solid var(--ring);border-radius:14px;padding:10px;text-align:center}
  .chip small{color:#cbd5e1}
  .chip b{display:block;font-size:18px;margin-top:4px}
  .actions{display:grid;gap:8px;margin-top:12px}
  @media (min-width:560px){ .actions{grid-template-columns:repeat(5,1fr)} }
  .btn{border:none;border-radius:12px;padding:12px 14px;font-weight:900;cursor:pointer;color:#06131a}
  .ok{background:linear-gradient(180deg,#34d399,#10b981)}
  .copy{background:linear-gradient(180deg,#c7d2fe,#818cf8)}
  .wa{background:linear-gradient(180deg,#61eb88,#25D366)}
  .print{background:linear-gradient(180deg,#67e8f9,#22d3ee)}
  .reset{background:linear-gradient(180deg,#fca5a5,#ef4444)}
  .hint{color:#9ca3af;font-size:12px;margin-top:4px}
  textarea#invoice{min-height:170px;resize:vertical}
  @media print{
    body{background:#fff;color:#000}
    .actions,.note{display:none}
    .card{box-shadow:none;border:none}
    textarea#invoice{background:#fff;border:1px solid #ddd}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <!-- اسم الشعار يطابق ملفك بالمستودع -->
        <div class="logo"><img src="شعار.png.jpg" alt="الشعار" onerror="this.style.display='none'"></div>
        <div>
          <h1>حاسبة السيرة الذاتية</h1>
          <div class="sub">فاتورة تلقائية — نسخ / واتساب / طباعة</div>
        </div>
      </header>

      <div class="note">
        ⚠ الأسعار مبنية على تقدير أولي لصفحة واحدة فقط.
      </div>

      <!-- البيانات -->
      <div class="grid grid-2" style="margin-top:12px">
        <div>
          <label for="name">اسم العميل</label>
          <input id="name" class="input" placeholder="شريفة الغفيري">
        </div>
        <div>
          <label for="phone">رقم الجوال</label>
          <input id="phone" class="input" placeholder="9665XXXXXXX">
        </div>
      </div>

      <!-- نوع الطلب واللغة والصفحات -->
      <div class="grid grid-3">
        <div>
          <label for="urgency">١) نوع الطلب</label>
          <select id="urgency" class="input">
            <option value="urgent">مستعجل (٢٤ ساعة)</option>
            <option value="normal" selected>غير مستعجل (٤٨ ساعة)</option>
          </select>
        </div>
        <div>
          <label for="pages">٢) عدد الصفحات الأساسية</label>
          <input id="pages" type="number" min="1" value="1" class="input">
        </div>
        <div>
          <label for="lang">٣) اللغة</label>
          <select id="lang" class="input">
            <option value="ar">عربي</option>
            <option value="en">إنجليزي</option>
            <option value="bi">ثنائية اللغة</option>
          </select>
        </div>
      </div>

      <!-- نوع السيرة (يتغير حسب نوع الطلب) -->
      <div style="margin-top:6px">
        <label for="cvType">٤) نوع السيرة (يتغيّر حسب نوع الطلب)</label>
        <select id="cvType" class="input"></select>
      </div>

      <!-- خدمات إضافية -->
      <div class="grid grid-3" style="margin-top:6px">
        <div>
          <label for="extraDesign">٥) تصميم خارج تصاميم الفريق</label>
          <select id="extraDesign" class="input">
            <option value="0" selected>لا</option>
            <option value="10">نعم (+١٠)</option>
          </select>
        </div>
        <div>
          <label for="extraTrans">٦) ترجمة السيرة</label>
          <select id="extraTrans" class="input">
            <option value="0" selected>لا</option>
            <option value="10">نعم (+١٠)</option>
          </select>
        </div>
        <div>
          <label for="extraEditable">٧) نسخة قابلة للتعديل (وورد/باوربوينت)</label>
          <select id="extraEditable" class="input">
            <option value="0" selected>لا</option>
            <option value="15">نعم (+١٥)</option>
          </select>
        </div>
      </div>

      <!-- الملخص والسعر -->
      <div class="meta">
        <div class="chip"><small>سعر الصفحة</small><b id="pricePer">٠</b><small>ريال</small></div>
        <div class="chip"><small>تكلفة الأساس</small><b id="baseTotal">٠</b><small>ريال</small></div>
        <div class="chip"><small>الإضافات</small><b id="addons">٠</b><small>ريال</small></div>
        <div class="chip"><small>الإجمالي</small><b id="grand">٠</b><small>ريال</small></div>
      </div>

      <!-- نص الفاتورة -->
      <label style="margin-top:14px">نص الفاتورة الجاهز 📋</label>
      <textarea id="invoice" class="input" placeholder="سيظهر هنا نص الفاتورة النهائي…"></textarea>

      <!-- الأزرار -->
      <div class="actions">
        <button class="btn ok"   id="calcBtn">حساب</button>
        <button class="btn copy" id="copyBtn">نسخ الفاتورة</button>
        <button class="btn wa"   id="waBtn">واتساب</button>
        <button class="btn print" onclick="window.print()">طباعة</button>
        <button class="btn reset" id="resetBtn">إعادة ضبط</button>
      </div>
    </div>
  </div>

<script>
/* قوائم الأسعار — مستعجل / غير مستعجل */
const PRICES = {
  urgent: {
    "سيرة ذاتية احترافية باللغة العربية": 35,
    "سيرة ذاتية احترافية باللغة الإنجليزية": 35,
    "سيرة ذاتية احترافية ثنائية اللغة": 45,
    "سيرة ذاتية رسمية باللغة العربية": 35,
    "سيرة ذاتية بسيطة باللغة الإنجليزية": 35,
    "سيرة ذاتية رسمية ثنائية اللغة": 40,
    "سيرة ذاتية احترافية تدعم ATS": 45,
    "سيرة ذاتية باللغة الإنجليزية تدعم ATS": 40
  },
  normal: {
    "سيرة ذاتية احترافية باللغة العربية": 25,
    "سيرة ذاتية احترافية باللغة الإنجليزية": 25,
    "سيرة ذاتية احترافية ثنائية اللغة": 30,
    "سيرة ذاتية رسمية باللغة العربية": 25,
    "سيرة ذاتية رسمية باللغة الإنجليزية": 25,
    "سيرة ذاتية رسمية ثنائية اللغة": 30,
    "سيرة ذاتية احترافية تدعم ATS": 30,
    "سيرة ذاتية باللغة الإنجليزية تدعم ATS": 30
  }
};

/* عناصر DOM */
const urgency = document.getElementById('urgency');
const cvType  = document.getElementById('cvType');
const pages   = document.getElementById('pages');
const lang    = document.getElementById('lang');

const extraDesign   = document.getElementById('extraDesign');
const extraTrans    = document.getElementById('extraTrans');
const extraEditable = document.getElementById('extraEditable');

const pricePer = document.getElementById('pricePer');
const baseTotal= document.getElementById('baseTotal');
const addons   = document.getElementById('addons');
const grand    = document.getElementById('grand');
const invoice  = document.getElementById('invoice');

const nameEl = document.getElementById('name');
const phoneEl= document.getElementById('phone');

/* أرقام عربية */
function toArabic(n){return String(n).replace(/\d/g,d=>"٠١٢٣٤٥٦٧٨٩"[d]);}

/* تعبئة أنواع السيرة حسب نوع الطلب */
function fillCvTypes(){
  const mode = urgency.value; // urgent | normal
  cvType.innerHTML = "";
  Object.entries(PRICES[mode]).forEach(([label, price])=>{
    const opt = document.createElement('option');
    opt.value = label;
    opt.textContent = ${label} — ${price} ريال/صفحة;
    cvType.appendChild(opt);
  });
}
fillCvTypes();
urgency.addEventListener('change', ()=>{ fillCvTypes(); updatePreview(); });

/* تحديث الأرقام في البطاقات */
function updatePreview(){
  const unit = PRICES[urgency.value][cvType.value] || 0;
  const pgs  = Math.max(1, parseInt(pages.value||'1',10));
  const base = unit * pgs;
  const add  = (+extraDesign.value) + (+extraTrans.value) + (+extraEditable.value);
  const total= base + add;

  pricePer.textContent  = toArabic(unit);
  baseTotal.textContent = toArabic(base);
  addons.textContent    = toArabic(add);
  grand.textContent     = toArabic(total);
}
['change','input'].forEach(ev=>{
  pages.addEventListener(ev, updatePreview);
  cvType.addEventListener(ev, updatePreview);
  extraDesign.addEventListener(ev, updatePreview);
  extraTrans.addEventListener(ev, updatePreview);
  extraEditable.addEventListener(ev, updatePreview);
});

/* بناء نص الفاتورة */
function buildInvoice(){
  const unit = PRICES[urgency.value][cvType.value] || 0;
  const pgs  = Math.max(1, parseInt(pages.value||'1',10));
  const base = unit * pgs;
  const add  = (+extraDesign.value) + (+extraTrans.value) + (+extraEditable.value);
  const total= base + add;

  const langMap = {ar:'العربية', en:'الإنجليزية', bi:'ثنائية اللغة'};
  const modeTxt = urgency.value==='urgent' ? 'مستعجل (٢٤ ساعة)' : 'غير مستعجل (٤٨ ساعة)';

  return [
    'فاتورة أولية',
    '----------------------',
    👤 العميل: ${nameEl.value || 'غير محدد'},
    📞 الجوال: ${phoneEl.value || 'غير محدد'},
    '',
    📌 نوع الطلب: ${modeTxt},
    🌐 اللغة: ${langMap[lang.value]},
    📄 نوع السيرة: ${cvType.value},
    📑 عدد الصفحات: ${toArabic(pgs)},
    '',
    💰 سعر الصفحة: ${toArabic(unit)} ريال,
    💼 تكلفة الأساس: ${toArabic(base)} ريال,
    ➕ إضافات: ${toArabic(add)} ريال,
    '======================',
    الإجمالي المستحق: ${toArabic(total)} ريال,
    '',
    '⚠ الأسعار مبنية على تقدير أولي لصفحة واحدة فقط.'
  ].join('\n');
}

/* أزرار */
document.getElementById('calcBtn').addEventListener('click', ()=>{
  updatePreview();
  invoice.value = buildInvoice();
});

document.getElementById('copyBtn').addEventListener('click', ()=>{
  invoice.select(); document.execCommand('copy');
  alert('تم نسخ الفاتورة ✅');
});

document.getElementById('waBtn').addEventListener('click', ()=>{
  if(!invoice.value) invoice.value = buildInvoice();
  const url = 'https://wa.me/?text=' + encodeURIComponent(invoice.value);
  window.open(url, '_blank');
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
  nameEl.value=''; phoneEl.value='';
  urgency.value='normal'; pages.value=1; lang.value='ar';
  extraDesign.value='0'; extraTrans.value='0'; extraEditable.value='0';
  fillCvTypes(); updatePreview(); invoice.value='';
});

/* تهيئة أولية */
updatePreview();
</script>
</body>
</html>
